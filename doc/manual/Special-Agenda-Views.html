<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- This manual is for Org version 9.2.

Copyright (C) 2004-2019  Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with no
Invariant Sections, with the Front-Cover Texts being "A GNU Manual,"
and with the Back-Cover Texts as in (a) below.  A copy of the license
is included in the section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual."
 -->
<!-- Created by GNU Texinfo 6.3, http://www.gnu.org/software/texinfo/ -->
<head>
<title>The Org Manual: Special Agenda Views</title>

<meta name="description" content="The Org Manual: Special Agenda Views">
<meta name="keywords" content="The Org Manual: Special Agenda Views">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link href="index.html#Top" rel="start" title="Top">
<link href="Main-Index.html#Main-Index" rel="index" title="Main Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Hacking.html#Hacking" rel="up" title="Hacking">
<link href="Speeding-Up-Your-Agendas.html#Speeding-Up-Your-Agendas" rel="next" title="Speeding Up Your Agendas">
<link href="Dynamic-Blocks.html#Dynamic-Blocks" rel="prev" title="Dynamic Blocks">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
blockquote.smallindentedblock {margin-right: 0em; font-size: smaller}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smalllisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="en">
<a name="Special-Agenda-Views"></a>
<div class="header">
<p>
Next: <a href="Speeding-Up-Your-Agendas.html#Speeding-Up-Your-Agendas" accesskey="n" rel="next">Speeding Up Your Agendas</a>, Previous: <a href="Dynamic-Blocks.html#Dynamic-Blocks" accesskey="p" rel="prev">Dynamic Blocks</a>, Up: <a href="Hacking.html#Hacking" accesskey="u" rel="up">Hacking</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Main-Index.html#Main-Index" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<a name="Special-Agenda-Views-1"></a>
<h3 class="appendixsec">A.7 Special Agenda Views</h3>

<a name="index-agenda-views_002c-user_002ddefined"></a>

<a name="index-org_002dagenda_002dskip_002dfunction"></a>
<a name="index-org_002dagenda_002dskip_002dfunction_002dglobal"></a>
<p>Org provides a special hook to further limit items in agenda views:
<code>agenda</code>, <code>agenda*</code><a name="DOCF160" href="#FOOT160"><sup>160</sup></a>, <code>todo</code>, <code>alltodo</code>, <code>tags</code>, <code>tags-todo</code>,
<code>tags-tree</code>.  Specify a custom function that tests inclusion of every
matched item in the view.  This function can also skip as much as is
needed.
</p>
<p>For a global condition applicable to agenda views, use the
<code>org-agenda-skip-function-global</code> variable.  Org uses a global
condition with <code>org-agenda-skip-function</code> for custom searching.
</p>
<p>This example defines a function for a custom view showing TODO items
with &lsquo;<samp>waiting</samp>&rsquo; status.  Manually this is a multi-step search process,
but with a custom view, this can be automated as follows:
</p>
<p>The custom function searches the subtree for the &lsquo;<samp>waiting</samp>&rsquo; tag and
returns <code>nil</code> on match.  Otherwise it gives the location from where
the search continues.
</p>
<div class="lisp">
<pre class="lisp">(defun my-skip-unless-waiting ()
  &quot;Skip trees that are not waiting&quot;
  (let ((subtree-end (save-excursion (org-end-of-subtree t))))
    (if (re-search-forward &quot;:waiting:&quot; subtree-end t)
        nil          ; tag found, do not skip
      subtree-end))) ; tag not found, continue after end of subtree
</pre></div>

<p>To use this custom function in a custom agenda command:
</p>
<div class="lisp">
<pre class="lisp">(org-add-agenda-custom-command
 '(&quot;b&quot; todo &quot;PROJECT&quot;
   ((org-agenda-skip-function 'my-skip-unless-waiting)
    (org-agenda-overriding-header &quot;Projects waiting for something: &quot;))))
</pre></div>

<a name="index-org_002dagenda_002doverriding_002dheader"></a>
<p>Note that this also binds <code>org-agenda-overriding-header</code> to a more
meaningful string suitable for the agenda view.
</p>
<a name="index-org_002dodd_002dlevels_002donly-3"></a>
<a name="index-org_002dagenda_002dskip_002dfunction-1"></a>
<p>Search for entries with a limit set on levels for the custom search.
This is a general approach to creating custom searches in Org.  To
include all levels, use &lsquo;<samp>LEVEL&gt;0</samp>&rsquo;<a name="DOCF161" href="#FOOT161"><sup>161</sup></a>.  Then to selectively pick
the matched entries, use <code>org-agenda-skip-function</code>, which also
accepts Lisp forms, such as <code>org-agenda-skip-entry-if</code> and
<code>org-agenda-skip-subtree-if</code>.  For example:
</p>
<dl compact="compact">
<dt>&lsquo;<samp>(org-agenda-skip-entry-if 'scheduled)</samp>&rsquo;</dt>
<dd><p>Skip current entry if it has been scheduled.
</p>
</dd>
<dt>&lsquo;<samp>(org-agenda-skip-entry-if 'notscheduled)</samp>&rsquo;</dt>
<dd><p>Skip current entry if it has not been scheduled.
</p>
</dd>
<dt>&lsquo;<samp>(org-agenda-skip-entry-if 'deadline)</samp>&rsquo;</dt>
<dd><p>Skip current entry if it has a deadline.
</p>
</dd>
<dt>&lsquo;<samp>(org-agenda-skip-entry-if 'scheduled 'deadline)</samp>&rsquo;</dt>
<dd><p>Skip current entry if it has a deadline, or if it is scheduled.
</p>
</dd>
<dt>&lsquo;<samp>(org-agenda-skip-entry-if 'todo '(&quot;TODO&quot; &quot;WAITING&quot;))</samp>&rsquo;</dt>
<dd><p>Skip current entry if the TODO keyword is TODO or WAITING.
</p>
</dd>
<dt>&lsquo;<samp>(org-agenda-skip-entry-if 'todo 'done)</samp>&rsquo;</dt>
<dd><p>Skip current entry if the TODO keyword marks a DONE state.
</p>
</dd>
<dt>&lsquo;<samp>(org-agenda-skip-entry-if 'timestamp)</samp>&rsquo;</dt>
<dd><p>Skip current entry if it has any timestamp, may also be deadline
or scheduled.
</p>
</dd>
<dt>&lsquo;<samp>(org-agenda-skip-entry-if 'regexp &quot;regular expression&quot;)</samp>&rsquo;</dt>
<dd><p>Skip current entry if the regular expression matches in the
entry.
</p>
</dd>
<dt>&lsquo;<samp>(org-agenda-skip-entry-if 'notregexp &quot;regular expression&quot;)</samp>&rsquo;</dt>
<dd><p>Skip current entry unless the regular expression matches.
</p>
</dd>
<dt>&lsquo;<samp>(org-agenda-skip-subtree-if 'regexp &quot;regular expression&quot;)</samp>&rsquo;</dt>
<dd><p>Same as above, but check and skip the entire subtree.
</p></dd>
</dl>

<p>The following is an example of a search for &lsquo;<samp>waiting</samp>&rsquo; without the
special function:
</p>
<div class="lisp">
<pre class="lisp">(org-add-agenda-custom-command
 '(&quot;b&quot; todo &quot;PROJECT&quot;
   ((org-agenda-skip-function '(org-agenda-skip-subtree-if
                                'regexp &quot;:waiting:&quot;))
    (org-agenda-overriding-header &quot;Projects waiting for something: &quot;))))
</pre></div>

<div class="footnote">
<hr>
<h4 class="footnotes-heading">Footnotes</h4>

<h3><a name="FOOT160" href="#DOCF160">(160)</a></h3>
<p>The <code>agenda*</code> view is the same as <code>agenda</code> except that it
only considers <em>appointments</em>, i.e., scheduled and deadline items that
have a time specification &lsquo;<samp>[h]h:mm</samp>&rsquo; in their time-stamps.</p>
<h3><a name="FOOT161" href="#DOCF161">(161)</a></h3>
<p>Note that, for <code>org-odd-levels-only</code>, a level number
corresponds to order in the hierarchy, not to the number of stars.</p>
</div>
<hr>
<div class="header">
<p>
Next: <a href="Speeding-Up-Your-Agendas.html#Speeding-Up-Your-Agendas" accesskey="n" rel="next">Speeding Up Your Agendas</a>, Previous: <a href="Dynamic-Blocks.html#Dynamic-Blocks" accesskey="p" rel="prev">Dynamic Blocks</a>, Up: <a href="Hacking.html#Hacking" accesskey="u" rel="up">Hacking</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Main-Index.html#Main-Index" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
