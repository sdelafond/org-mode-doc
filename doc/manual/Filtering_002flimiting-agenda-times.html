<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<!-- This manual is for Org version 9.2.

Copyright (C) 2004-2019  Free Software Foundation, Inc.

Permission is granted to copy, distribute and/or modify this document
under the terms of the GNU Free Documentation License, Version 1.3 or
any later version published by the Free Software Foundation; with no
Invariant Sections, with the Front-Cover Texts being "A GNU Manual,"
and with the Back-Cover Texts as in (a) below.  A copy of the license
is included in the section entitled "GNU Free Documentation License."

(a) The FSF's Back-Cover Text is: "You have the freedom to copy and
modify this GNU manual."
 -->
<!-- Created by GNU Texinfo 6.3, http://www.gnu.org/software/texinfo/ -->
<head>
<title>The Org Manual: Filtering/limiting agenda times</title>

<meta name="description" content="The Org Manual: Filtering/limiting agenda times">
<meta name="keywords" content="The Org Manual: Filtering/limiting agenda times">
<meta name="resource-type" content="document">
<meta name="distribution" content="global">
<meta name="Generator" content="makeinfo">
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<link href="index.html#Top" rel="start" title="Top">
<link href="Main-Index.html#Main-Index" rel="index" title="Main Index">
<link href="index.html#SEC_Contents" rel="contents" title="Table of Contents">
<link href="Presentation-and-Sorting.html#Presentation-and-Sorting" rel="up" title="Presentation and Sorting">
<link href="Agenda-Commands.html#Agenda-Commands" rel="next" title="Agenda Commands">
<link href="Sorting-of-agenda-items.html#Sorting-of-agenda-items" rel="prev" title="Sorting of agenda items">
<style type="text/css">
<!--
a.summary-letter {text-decoration: none}
blockquote.indentedblock {margin-right: 0em}
blockquote.smallindentedblock {margin-right: 0em; font-size: smaller}
blockquote.smallquotation {font-size: smaller}
div.display {margin-left: 3.2em}
div.example {margin-left: 3.2em}
div.lisp {margin-left: 3.2em}
div.smalldisplay {margin-left: 3.2em}
div.smallexample {margin-left: 3.2em}
div.smalllisp {margin-left: 3.2em}
kbd {font-style: oblique}
pre.display {font-family: inherit}
pre.format {font-family: inherit}
pre.menu-comment {font-family: serif}
pre.menu-preformatted {font-family: serif}
pre.smalldisplay {font-family: inherit; font-size: smaller}
pre.smallexample {font-size: smaller}
pre.smallformat {font-family: inherit; font-size: smaller}
pre.smalllisp {font-size: smaller}
span.nolinebreak {white-space: nowrap}
span.roman {font-family: initial; font-weight: normal}
span.sansserif {font-family: sans-serif; font-weight: normal}
ul.no-bullet {list-style: none}
-->
</style>


</head>

<body lang="en">
<a name="Filtering_002flimiting-agenda-times"></a>
<div class="header">
<p>
Previous: <a href="Sorting-of-agenda-items.html#Sorting-of-agenda-items" accesskey="p" rel="prev">Sorting of agenda items</a>, Up: <a href="Presentation-and-Sorting.html#Presentation-and-Sorting" accesskey="u" rel="up">Presentation and Sorting</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Main-Index.html#Main-Index" title="Index" rel="index">Index</a>]</p>
</div>
<hr>
<a name="Filtering_002flimiting-agenda-times-1"></a>
<h4 class="subsection">10.4.4 Filtering/limiting agenda times</h4>

<p>Agenda built-in or customized commands are statically defined.  Agenda
filters and limits provide two ways of dynamically narrowing down the
list of agenda entries: <em>filters</em> and <em>limits</em>.  Filters only act on
the display of the items, while limits take effect before the list of
agenda entries is built.  Filters are more often used interactively,
while limits are mostly useful when defined as local variables within
custom agenda commands.
</p>
<a name="Filtering-in-the-agenda"></a><a name="Filtering-in-the-agenda-1"></a>
<h4 class="subsubheading">Filtering in the agenda</h4>

<a name="index-agenda-filtering"></a>
<a name="index-filtering-entries_002c-in-agenda"></a>
<a name="index-tag-filtering_002c-in-agenda"></a>
<a name="index-category-filtering_002c-in-agenda"></a>
<a name="index-top-headline-filtering_002c-in-agenda"></a>
<a name="index-effort-filtering_002c-in-agenda"></a>
<a name="index-query-editing_002c-in-agenda"></a>

<dl compact="compact">
<dt><kbd>/</kbd> (<code>org-agenda-filter-by-tag</code>)</dt>
<dd><a name="index-org_002dagenda_002dfilter_002dby_002dtag"></a>
<a name="index-org_002dagenda_002dtag_002dfilter_002dpreset"></a>
<p>Filter the agenda view with respect to a tag and/or effort
estimates.  The difference between this and a custom agenda
command is that filtering is very fast, so that you can switch
quickly between different filters without having to recreate the
agenda.<a name="DOCF97" href="#FOOT97"><sup>97</sup></a>
</p>
<p>You are prompted for a tag selection letter; <kbd><span class="key">SPC</span></kbd> means
any tag at all.  Pressing <kbd><span class="key">TAB</span></kbd> at that prompt offers
completion to select a tag, including any tags that do not have
a selection character.  The command then hides all entries that
do not contain or inherit this tag.  When called with prefix
argument, remove the entries that <em>do</em> have the tag.  A second
<kbd>/</kbd> at the prompt turns off the filter and shows any
hidden entries.  Pressing <kbd>+</kbd> or <kbd>-</kbd> switches
between filtering and excluding the next tag.
</p>
<a name="index-org_002dagenda_002dauto_002dexclude_002dfunction"></a>
<p>Org also supports automatic, context-aware tag filtering.  If the
variable <code>org-agenda-auto-exclude-function</code> is set to
a user-defined function, that function can decide which tags
should be excluded from the agenda automatically.  Once this is
set, the <kbd>/</kbd> command then accepts <kbd><span class="key">RET</span></kbd> as
a sub-option key and runs the auto exclusion logic.  For example,
let&rsquo;s say you use a &lsquo;<samp>Net</samp>&rsquo; tag to identify tasks which need
network access, an &lsquo;<samp>Errand</samp>&rsquo; tag for errands in town, and a &lsquo;<samp>Call</samp>&rsquo;
tag for making phone calls.  You could auto-exclude these tags
based on the availability of the Internet, and outside of
business hours, with something like this:
</p>
<div class="lisp">
<pre class="lisp">(defun org-my-auto-exclude-function (tag)
  (and (cond
        ((string= tag &quot;Net&quot;)
         (/= 0 (call-process &quot;/sbin/ping&quot; nil nil nil
                             &quot;-c1&quot; &quot;-q&quot; &quot;-t1&quot; &quot;mail.gnu.org&quot;)))
        ((or (string= tag &quot;Errand&quot;) (string= tag &quot;Call&quot;))
         (let ((hour (nth 2 (decode-time))))
           (or (&lt; hour 8) (&gt; hour 21)))))
       (concat &quot;-&quot; tag)))

(setq org-agenda-auto-exclude-function 'org-my-auto-exclude-function)
</pre></div>

</dd>
<dt><kbd>&lt;</kbd> (<code>org-agenda-filter-by-category</code>)</dt>
<dd><a name="index-org_002dagenda_002dfilter_002dby_002dcategory"></a>
<p>Filter the current agenda view with respect to the category of
the item at point.  Pressing <kbd>&lt;</kbd> another time removes
this filter.  When called with a prefix argument exclude the
category of the item at point from the agenda.
</p>
<a name="index-org_002dagenda_002dcategory_002dfilter_002dpreset"></a>
<p>You can add a filter preset in custom agenda commands through the
option <code>org-agenda-category-filter-preset</code>.  See <a href="Setting-options.html#Setting-options">Setting options</a>.
</p>
</dd>
<dt><kbd>^</kbd> (<code>org-agenda-filter-by-top-headline</code>)</dt>
<dd><a name="index-org_002dagenda_002dfilter_002dby_002dtop_002dheadline"></a>
<p>Filter the current agenda view and only display the siblings and
the parent headline of the one at point.
</p>
</dd>
<dt><kbd>=</kbd> (<code>org-agenda-filter-by-regexp</code>)</dt>
<dd><a name="index-org_002dagenda_002dfilter_002dby_002dregexp"></a>
<p>Filter the agenda view by a regular expression: only show agenda
entries matching the regular expression the user entered.  When
called with a prefix argument, it filters <em>out</em> entries matching
the regexp.  Called in a regexp-filtered agenda view, remove the
filter, unless there are two universal prefix arguments, in which
case filters are cumulated.
</p>
<a name="index-org_002dagenda_002dregexp_002dfilter_002dpreset"></a>
<p>You can add a filter preset in custom agenda commands through the
option <code>org-agenda-regexp-filter-preset</code>.  See <a href="Setting-options.html#Setting-options">Setting options</a>.
</p>
</dd>
<dt><kbd>_</kbd> (<code>org-agenda-filter-by-effort</code>)</dt>
<dd><a name="index-org_002dagenda_002dfilter_002dby_002deffort"></a>
<p>Filter the agenda view with respect to effort estimates.  You
first need to set up allowed efforts globally, for example
</p>
<div class="lisp">
<pre class="lisp">(setq org-global-properties
      '((&quot;Effort_ALL&quot;. &quot;0 0:10 0:30 1:00 2:00 3:00 4:00&quot;)))
</pre></div>

<a name="index-org_002dsort_002dagenda_002dnoeffort_002dis_002dhigh"></a>
<p>You can then filter for an effort by first typing an operator,
one of <kbd>&lt;</kbd>, <kbd>&gt;</kbd> and <kbd>=</kbd>, and then the
one-digit index of an effort estimate in your array of allowed
values, where <kbd>0</kbd> means the 10th value.  The filter then
restricts to entries with effort smaller-or-equal, equal, or
larger-or-equal than the selected value.  For application of the
operator, entries without a defined effort are treated according
to the value of <code>org-sort-agenda-noeffort-is-high</code>.
</p>
<p>When called with a prefix argument, it removes entries matching
the condition.  With two universal prefix arguments, it clears
effort filters, which can be accumulated.
</p>
<a name="index-org_002dagenda_002deffort_002dfilter_002dpreset"></a>
<p>You can add a filter preset in custom agenda commands through the
option <code>org-agenda-effort-filter-preset</code>.  See <a href="Setting-options.html#Setting-options">Setting options</a>.
</p>
</dd>
<dt><kbd>|</kbd> (<code>org-agenda-filter-remove-all</code>)</dt>
<dd><p>Remove all filters in the current agenda view.
</p></dd>
</dl>

<a name="Setting-limits-for-the-agenda"></a><a name="Setting-limits-for-the-agenda-1"></a>
<h4 class="subsubheading">Setting limits for the agenda</h4>

<a name="index-limits_002c-in-agenda"></a>

<p>Here is a list of options that you can set, either globally, or
locally in your custom agenda views (see <a href="Custom-Agenda-Views.html#Custom-Agenda-Views">Custom Agenda Views</a>).
</p>
<dl compact="compact">
<dt><code>org-agenda-max-entries</code></dt>
<dd><a name="index-org_002dagenda_002dmax_002dentries"></a>
<p>Limit the number of entries.
</p>
</dd>
<dt><code>org-agenda-max-effort</code></dt>
<dd><a name="index-org_002dagenda_002dmax_002deffort"></a>
<p>Limit the duration of accumulated efforts (as minutes).
</p>
</dd>
<dt><code>org-agenda-max-todos</code></dt>
<dd><a name="index-org_002dagenda_002dmax_002dtodos"></a>
<p>Limit the number of entries with TODO keywords.
</p>
</dd>
<dt><code>org-agenda-max-tags</code></dt>
<dd><a name="index-org_002dagenda_002dmax_002dtags"></a>
<p>Limit the number of tagged entries.
</p></dd>
</dl>

<p>When set to a positive integer, each option excludes entries from
other categories: for example, &lsquo;<samp>(setq org-agenda-max-effort 100)</samp>&rsquo;
limits the agenda to 100 minutes of effort and exclude any entry that
has no effort property.  If you want to include entries with no effort
property, use a negative value for <code>org-agenda-max-effort</code>.  One
useful setup is to use <code>org-agenda-max-entries</code> locally in a custom
command.  For example, this custom command displays the next five
entries with a &lsquo;<samp>NEXT</samp>&rsquo; TODO keyword.
</p>
<div class="lisp">
<pre class="lisp">(setq org-agenda-custom-commands
      '((&quot;n&quot; todo &quot;NEXT&quot;
         ((org-agenda-max-entries 5)))))
</pre></div>

<p>Once you mark one of these five entry as DONE, rebuilding the agenda
will again the next five entries again, including the first entry that
was excluded so far.
</p>
<p>You can also dynamically set temporary limits, which are lost when
rebuilding the agenda:
</p>
<dl compact="compact">
<dt><kbd>~</kbd> (<code>org-agenda-limit-interactively</code>)</dt>
<dd><a name="index-org_002dagenda_002dlimit_002dinteractively"></a>
<p>This prompts for the type of limit to apply and its value.
</p></dd>
</dl>

<div class="footnote">
<hr>
<h4 class="footnotes-heading">Footnotes</h4>

<h3><a name="FOOT97" href="#DOCF97">(97)</a></h3>
<p>Custom commands can preset a filter by binding the variable
<code>org-agenda-tag-filter-preset</code> as an option.  This filter is then
applied to the view and persists as a basic filter through refreshes
and more secondary filtering.  The filter is a global property of the
entire agenda view&mdash;in a block agenda, you should only set this in
the global options section, not in the section of an individual block.</p>
</div>
<hr>
<div class="header">
<p>
Previous: <a href="Sorting-of-agenda-items.html#Sorting-of-agenda-items" accesskey="p" rel="prev">Sorting of agenda items</a>, Up: <a href="Presentation-and-Sorting.html#Presentation-and-Sorting" accesskey="u" rel="up">Presentation and Sorting</a> &nbsp; [<a href="index.html#SEC_Contents" title="Table of contents" rel="contents">Contents</a>][<a href="Main-Index.html#Main-Index" title="Index" rel="index">Index</a>]</p>
</div>



</body>
</html>
